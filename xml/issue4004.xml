<?xml version='1.0' encoding='utf-8' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd">

<issue num="4004" status="New">
<title>It is underspecified in which header <tt>std::formatter</tt> specializations for container adaptors are provided</title>
<section><sref ref="[container.adaptors.format]"/></section>
<submitter>Jiang An</submitter>
<date>29 Oct 2023</date>
<priority>99</priority>

<discussion>
<p>
<paper num="P2286R8"/> added <tt>std::formatter</tt> specializations for container adaptors, but didn't show them 
in synopses of headers. Presumably these specializations should be provided in <tt>&lt;stack&gt;</tt> and <tt>&lt;queue&gt;</tt>.
</p>
</discussion>

<resolution>
<p>
This wording is relative to <paper num="N4964"/>.
</p>

<ol>

<li><p>Modify <sref ref="[queue.syn]"/>, header <tt>&lt;queue&gt;</tt> synopsis, as indicated:</p>

<blockquote><pre>
[&hellip;]
namespace std {
  // <i><sref ref="[queue]"/>, class template</i> queue
  template&lt;class T, class Container = deque&lt;T&gt;&gt; class queue;
  [&hellip;]
  template&lt;class T, class Container, class Alloc&gt;
    struct uses_allocator&lt;queue&lt;T, Container&gt;, Alloc&gt;;
  <ins>template&lt;class charT, class T, formattable&lt;charT&gt; Container&gt;
    struct formatter&lt;queue&lt;T, Container&gt;, charT&gt;;</ins>
    
  // <i><sref ref="[priority.queue]"/>, class template</i> priority_queue
  template&lt;class T, class Container = vector&lt;T&gt;,
           class Compare = less&lt;typename Container::value_type&gt;&gt;
  class priority_queue;
  [&hellip;]
  template&lt;class T, class Container, class Compare, class Alloc&gt;
    struct uses_allocator&lt;priority_queue&lt;T, Container, Compare>,&gt;, Alloc&gt;;
  <ins>template&lt;class charT, class T, formattable&lt;charT&gt; Container, class Compare&gt;
    struct formatter&lt;priority_queue&lt;T, Container, Compare&gt;, charT&gt;;</ins>
}
</pre></blockquote>

</li>

<li><p>Modify <sref ref="[stack.syn]"/>, header <tt>&lt;stack&gt;</tt> synopsis, as indicated:</p>

<blockquote><pre>
[&hellip;]
namespace std {
  // <i><sref ref="[stack]"/>, class template</i> stack
  template&lt;class T, class Container = deque&lt;T&gt;&gt; class stack;
  [&hellip;]
  template&lt;class T, class Container, class Alloc&gt;
    struct uses_allocator&lt;stack&lt;T, Container&gt;, Alloc&gt;;
  <ins>template&lt;class charT, class T, formattable&lt;charT&gt; Container&gt;
    struct formatter&lt;stack&lt;T, Container&gt;, charT&gt;;</ins>
}
</pre></blockquote>

</li>

</ol>
</resolution>

</issue>
