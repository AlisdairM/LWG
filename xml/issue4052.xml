<?xml version='1.0' encoding='utf-8' standalone='no'?>
<!DOCTYPE issue SYSTEM "lwg-issue.dtd">

<issue num="4052" status="New">
<title>Clarify that "constexpr iterator" is a requirement to be met</title>
<section><sref ref="[iterator.requirements.general]"/></section>
<submitter>Daniel Kr√ºgler</submitter>
<date>04 Feb 2024</date>
<priority>99</priority>

<discussion>
<p>
The term <i>constexpr iterator</i> is defined in <sref ref="[iterator.requirements.general]"/> as follows:
</p>
<blockquote><p>
-16- Iterators are called <i>constexpr iterators</i> if all operations provided to meet iterator category 
requirements are constexpr functions.
<p/>
[<i>Note 3</i>: For example, the types "pointer to <i>int</i>" and <tt>reverse_iterator&lt;int*&gt;</tt> are 
constexpr iterators. &mdash; <i>end note</i>]
</p></blockquote>
<p>
The particular form of this definition using the term "called" is untypical for a requirement and has let 
to the interpretation in the proposed wording of LWG <iref ref="4038"/> that when we require a type to 
meet the requirement of a constexpr iterator we should impose an "is a constexpr iterator" requirement. 
This deviates from all existing places where we impose the form "meets the constexpr iterator requirements" 
instead (<sref ref="[string.view.iterators]"/> p1, <sref ref="[basic.string.general]"/> p5, 
<sref ref="[container.opt.reqmts]"/> p1, <sref ref="[array.overview]"/> p5, <sref ref="[vector.overview]"/> p3).
<p/>
Note that the term <i>meets the XX requirements</i> is <em>not</em> restricted to the <i>Cpp17YY</i> requirements, 
we use it elsewhere to, e.g. when we say that a type meets the character traits requirements (<sref ref="[char.traits]"/>),
the allocator-aware container requirements (<sref ref="[container.alloc.reqmts]"/>), or the layout mappings 
requirements (<sref ref="[mdspan.layout.policy.reqmts]"/>).
<p/>
To make the status quo clearer this issue suggests to reword <sref ref="[iterator.requirements.general]"/> to
be a requirement set. The alternative would be to change all currently referencing places to say "is a constexpr iterator"
instead.
</p>
</discussion>

<resolution>
<p>
This wording is relative to <paper num="N4971"/>.
</p>

<ol>
<li><p>Modify <sref ref="[iterator.requirements.general]"/> as indicated:</p>

<blockquote>
<p>
-16- Iterators <ins>meet the</ins><del>are called</del> <i>constexpr iterators</i> <ins>requirements</ins> if all operations 
provided to meet iterator category requirements are constexpr functions.
<p/>
[<i>Note 3</i>: For example, the types "pointer to <i>int</i>" and <tt>reverse_iterator&lt;int*&gt;</tt> are 
constexpr iterators. &mdash; <i>end note</i>]
</p>
</blockquote>
</li>
</ol>
</resolution>

</issue>
